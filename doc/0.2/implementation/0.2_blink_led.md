# Amber128 0.2 LED Blink Demo

This example shows how to exercise the Amber128 (v0.2) core on the Sipeed Tang Mega 138K Dock by
periodically toggling the MMIO LED bank. The assembly source lives at
`src/0.2/asm/blink_led.asm` and builds to `build/amber128_blink.hex` using the
Amber 0.2 assembler (`tools/amber128_asm.py`).

## Build the ROM image

```
python tools/amber128_asm.py src/0.2/asm/blink_led.asm -o build/amber128_blink.hex
```

The assembler now packs 12-bit ALU instructions so the triple-nested delay loops
can count roughly 27 million cycles (approx. one second at the 27 MHz system clock).

## Point the FPGA image at the blink program

`amber128_top.sv` instantiates `amber128_imem` with the default ROM file
`build/amber128_smoke.hex`. Before running the Gowin build script, copy or rename
the generated blink hex into that location:

```
copy build/amber128_blink.hex build/amber128_smoke.hex
```

Alternatively, adjust the `INIT_FILE` parameter in `src/0.2/fpga/gowin_arorav/amber128_top.sv`
or `build.tcl` to reference `amber128_blink.hex` directly.

## Synthesis and programming

Run the existing Gowin flow (`src/0.2/fpga/gowin_arorav/build.tcl`) to regenerate
the bitstream, then program the Tang Mega 138K Dock following your normal
procedure (USB Blaster, Gowin Programmer, etc.). Once the design is loaded, LED0
from the MMIO block should toggle roughly once per second. Because the busy-wait
loop is purely software, small frequency differences in the board clock will
slightly stretch or compress the period.
